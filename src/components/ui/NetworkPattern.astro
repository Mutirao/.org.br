---
/**
 * NetworkPattern - SVG pattern component
 *
 * Creates a network/connection visual pattern that can be used as a decorative background.
 * Represents the collaborative and interconnected nature of Mutir√£o's work.
 *
 * Props:
 * - opacity: Pattern opacity (default: 0.1)
 * - color: Pattern color (default: 'currentColor')
 * - variant: 'dots', 'connections', or 'grid' (default: 'connections')
 */

interface Props {
  opacity?: number;
  color?: string;
  variant?: 'dots' | 'connections' | 'grid';
}

const { opacity = 0.1, color = 'currentColor', variant = 'connections' } = Astro.props;
---

<div class="network-pattern" data-variant={variant}>
  <svg class="network-pattern__svg" xmlns="http://www.w3.org/2000/svg">
    <defs>
      {variant === 'connections' && (
        <pattern id="network-connections" x="0" y="0" width="120" height="120" patternUnits="userSpaceOnUse">
          <!-- Nodes -->
          <circle cx="20" cy="20" r="3" fill={color} opacity={opacity * 1.5} />
          <circle cx="60" cy="40" r="3" fill={color} opacity={opacity * 1.5} />
          <circle cx="100" cy="20" r="3" fill={color} opacity={opacity * 1.5} />
          <circle cx="40" cy="80" r="3" fill={color} opacity={opacity * 1.5} />
          <circle cx="90" cy="90" r="3" fill={color} opacity={opacity * 1.5} />

          <!-- Connections -->
          <line x1="20" y1="20" x2="60" y2="40" stroke={color} stroke-width="1" opacity={opacity} />
          <line x1="60" y1="40" x2="100" y2="20" stroke={color} stroke-width="1" opacity={opacity} />
          <line x1="60" y1="40" x2="40" y2="80" stroke={color} stroke-width="1" opacity={opacity} />
          <line x1="40" y1="80" x2="90" y2="90" stroke={color} stroke-width="1" opacity={opacity} />
          <line x1="20" y1="20" x2="40" y2="80" stroke={color} stroke-width="1" opacity={opacity * 0.5} />
        </pattern>
      )}

      {variant === 'dots' && (
        <pattern id="network-dots" x="0" y="0" width="40" height="40" patternUnits="userSpaceOnUse">
          <circle cx="20" cy="20" r="2" fill={color} opacity={opacity} />
          <circle cx="0" cy="0" r="1.5" fill={color} opacity={opacity * 0.6} />
          <circle cx="40" cy="0" r="1.5" fill={color} opacity={opacity * 0.6} />
          <circle cx="0" cy="40" r="1.5" fill={color} opacity={opacity * 0.6} />
          <circle cx="40" cy="40" r="1.5" fill={color} opacity={opacity * 0.6} />
        </pattern>
      )}

      {variant === 'grid' && (
        <pattern id="network-grid" x="0" y="0" width="60" height="60" patternUnits="userSpaceOnUse">
          <path d="M 60 0 L 0 0 0 60" fill="none" stroke={color} stroke-width="1" opacity={opacity} />
          <circle cx="0" cy="0" r="2" fill={color} opacity={opacity * 1.2} />
        </pattern>
      )}
    </defs>
    <rect width="100%" height="100%" fill={`url(#network-${variant})`} />
  </svg>
</div>

<style>
  .network-pattern {
    position: absolute;
    inset: 0;
    pointer-events: none;
    overflow: hidden;
  }

  .network-pattern__svg {
    width: 100%;
    height: 100%;
  }

  /* Subtle animation for connections variant */
  .network-pattern[data-variant="connections"] .network-pattern__svg {
    animation: network-float 20s ease-in-out infinite;
  }

  @keyframes network-float {
    0%, 100% {
      transform: translate(0, 0);
    }
    25% {
      transform: translate(2px, -2px);
    }
    50% {
      transform: translate(-2px, 2px);
    }
    75% {
      transform: translate(2px, 2px);
    }
  }

  /* Responsive adjustments */
  @media (max-width: 768px) {
    .network-pattern {
      opacity: 0.5;
    }
  }
</style>
